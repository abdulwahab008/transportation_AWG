<!DOCTYPE html>
<html lang="en">
<head>
    <title>MOR-BOOKING</title>
    <link rel="stylesheet" href="static/booking.css">
    <script src="https://kit.fontawesome.com/c3e72e928c.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="main" style="font-style: italic; font-family: cursive;">
        <div class="navbar">
            <img src="static/images/Screenshot 2024-08-15 214832.png" alt="Logo" class="logo">
            <a href="userdashboard.html" class="nav-link"><i class="fa-solid fa-arrow-left"></i>BACK</a>
        </div> 
        <div class="content">
            <h1>Vehicle</h1>
            <p class="par" style="text-align: left;"> <br> Are you looking for Hajj Umrah transport? If yes, then you are at the right place. Your desired transport needs will be fulfilled in a friendly way.</p>
            <section>
                <div class="car-container" id="car-container">
                    <!-- Cars will be dynamically inserted here -->
                </div>
            </section>  
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('/api/vehicles')
                .then(response => response.json())
                .then(data => {
                    const carContainer = document.getElementById('car-container');
        
                    data.forEach(vehicle => {
                        const carSelection = document.createElement('div');
                        carSelection.className = 'car-selection';
        
                        const carDiv = document.createElement('div');
                        carDiv.className = 'car';
        
                        const img = document.createElement('img');
                        img.src = `/uploads/${vehicle.vehicle_image}`;
                        img.alt = vehicle.vehicle_name;
        
                        const carInfo = document.createElement('div');
                        carInfo.className = 'car-info';
        
                        const h3 = document.createElement('h3');
                        h3.textContent = vehicle.vehicle_name;
        
                        const p = document.createElement('p');
                        p.textContent = `Price: ${vehicle.vehicle_price} SAR/day`;
        
                        const button = document.createElement('button');
                        button.dataset.car = vehicle.vehicle_name;
                        button.dataset.price = vehicle.vehicle_price;
        
                        const link = document.createElement('a');
                        link.href = `bookingform.html?car=${encodeURIComponent(vehicle.vehicle_name)}&price=${vehicle.vehicle_price}`;
                        link.textContent = 'Book';
        
                        button.appendChild(link);
                        carInfo.appendChild(h3);
                        carInfo.appendChild(p);
                        carInfo.appendChild(button);
                        carDiv.appendChild(img);
                        carDiv.appendChild(carInfo);
                        carSelection.appendChild(carDiv);
                        carContainer.appendChild(carSelection);
                    });
                })
                .catch(error => console.error('Error fetching vehicles:', error));
        });
    </script>
</body>
</html>
